# Migrating from 0.4.3_alpha to 0.4.4_alpha

This migration guide outlines the steps required to update your bot from version 0.4.3_alpha to 0.4.4_alpha.

## Breaking Changes

The most significant change in this version is the removal of bot appearance settings from the `.env` file. These settings have been moved to the `data.json` file for better runtime configuration management.

### Required Actions

1. **Transfer Bot Appearance Settings**
   - Open your `.env` file and locate the following values:
     - `CHAT_NAME`
     - `CHAT_AVATAR_ID`
     - `CHAT_COLOUR`
   - Copy these values before removing them

2. **Update data.json**
   - Open your `data.json` file
   - Add or update the `botData` section with your copied values:
   ```json
   {
     "welcomeMessage": "your-existing-welcome-message",
     "botData": {
       "CHAT_NAME": "your-bot-name",
       "CHAT_AVATAR_ID": "your-avatar-id",
       "CHAT_COLOUR": "your-color-code"
     }
   }
   ```
   - Save the file

3. **Remove Old Environment Variables**
   - Delete the following lines from your `.env` file:
     - `CHAT_NAME=...`
     - `CHAT_AVATAR_ID=...`
     - `CHAT_COLOUR=...`

4. **Verify Configuration**
   - Start your bot and ensure it connects with the correct name and appearance
   - Try the new `changeBotName` command (Owner permissions required) to verify the settings can be updated

## New Features

### Bot Appearance Management
- Bot owners can now use the `changeBotName` command to modify the bot's appearance
- Changes are persistent and survive bot restarts
- Example usage: `/changeBotName New Bot Name`

### Role Verification
- Enhanced user role checking through the new HangUserService
- More robust command authorization
- Better error handling for unauthorized command attempts

## Troubleshooting

If you encounter issues after migration:

1. **Bot Appearance Not Updating**
   - Verify your `data.json` file contains the correct structure
   - Ensure the values are properly formatted (no leading '#' in color codes)
   - Check file permissions on `data.json`

2. **Command Permissions**
   - Only bot owners can use the `changeBotName` command
   - Verify your user role if you're having permission issues

For additional help, please refer to the main documentation or open an issue on the repository.
